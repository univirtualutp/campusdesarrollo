var Sn=Object.defineProperty;var Ln=(e,n,t)=>n in e?Sn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Te=(e,n,t)=>(Ln(e,typeof n!="symbol"?n+"":n,t),t);function U(){}const De=e=>e;function Mn(e,n){for(const t in n)e[t]=n[t];return e}function mn(e){return e()}function ze(){return Object.create(null)}function G(e){e.forEach(mn)}function q(e){return typeof e=="function"}function yt(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}let we;function pt(e,n){return e===n?!0:(we||(we=document.createElement("a")),we.href=n,e===we.href)}function ee(e,n){return e!=e?n==n:e!==n}function En(e){return Object.keys(e).length===0}function vt(e,...n){if(e==null){for(const l of n)l(void 0);return U}const t=e.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}function hn(e,n,t,l){if(e){const i=gn(e,n,t,l);return e[0](i)}}function gn(e,n,t,l){return e[1]&&l?Mn(t.ctx.slice(),e[1](l(n))):t.ctx}function _n(e,n,t,l){if(e[2]&&l){const i=e[2](l(t));if(n.dirty===void 0)return i;if(typeof i=="object"){const a=[],s=Math.max(n.dirty.length,i.length);for(let o=0;o<s;o+=1)a[o]=n.dirty[o]|i[o];return a}return n.dirty|i}return n.dirty}function bn(e,n,t,l,i,a){if(i){const s=gn(n,t,l,a);e.p(s,i)}}function kn(e){if(e.ctx.length>32){const n=[],t=e.ctx.length/32;for(let l=0;l<t;l++)n[l]=-1;return n}return-1}function ue(e){return e&&q(e.destroy)?e.destroy:U}function It(e){const n=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return n?[parseFloat(n[1]),n[2]||"px"]:[e,"px"]}const wn=typeof window<"u";let Re=wn?()=>window.performance.now():()=>Date.now(),Fe=wn?e=>requestAnimationFrame(e):U;const re=new Set;function Cn(e){re.forEach(n=>{n.c(e)||(re.delete(n),n.f())}),re.size!==0&&Fe(Cn)}function Oe(e){let n;return re.size===0&&Fe(Cn),{promise:new Promise(t=>{re.add(n={c:e,f:t})}),abort(){re.delete(n)}}}function L(e,n){e.appendChild(n)}function yn(e){if(!e)return document;const n=e.getRootNode?e.getRootNode():e.ownerDocument;return n&&n.host?n:e.ownerDocument}function Nn(e){const n=E("style");return n.textContent="/* empty */",An(yn(e),n),n.sheet}function An(e,n){return L(e.head||e,n),n.sheet}function F(e,n,t){e.insertBefore(n,t||null)}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function Pt(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function E(e){return document.createElement(e)}function Y(e){return document.createTextNode(e)}function O(){return Y(" ")}function Me(){return Y("")}function V(e,n,t,l){return e.addEventListener(n,t,l),()=>e.removeEventListener(n,t,l)}function Tt(e){return function(n){return n.preventDefault(),e.call(this,n)}}function St(e){return function(n){return n.stopPropagation(),e.call(this,n)}}function b(e,n,t){t==null?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function Bn(e){return Array.from(e.childNodes)}function x(e,n){n=""+n,e.data!==n&&(e.data=n)}function Ke(e,n){e.value=n??""}function Lt(e,n,t,l){t==null?e.style.removeProperty(n):e.style.setProperty(n,t,l?"important":"")}function Mt(e,n,t){for(let l=0;l<e.options.length;l+=1){const i=e.options[l];if(i.__value===n){i.selected=!0;return}}(!t||n!==void 0)&&(e.selectedIndex=-1)}function Et(e){const n=e.querySelector(":checked");return n&&n.__value}function A(e,n,t){e.classList.toggle(n,!!t)}function Dn(e,n,{bubbles:t=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:n,bubbles:t,cancelable:l})}const ye=new Map;let pe=0;function Rn(e){let n=5381,t=e.length;for(;t--;)n=(n<<5)-n^e.charCodeAt(t);return n>>>0}function Fn(e,n){const t={stylesheet:Nn(n),rules:{}};return ye.set(e,t),t}function ve(e,n,t,l,i,a,s,o=0){const f=16.666/l;let r=`{
`;for(let g=0;g<=1;g+=f){const P=n+(t-n)*a(g);r+=g*100+`%{${s(P,1-P)}}
`}const u=r+`100% {${s(t,1-t)}}
}`,c=`__svelte_${Rn(u)}_${o}`,h=yn(e),{stylesheet:C,rules:m}=ye.get(h)||Fn(h,e);m[c]||(m[c]=!0,C.insertRule(`@keyframes ${c} ${u}`,C.cssRules.length));const k=e.style.animation||"";return e.style.animation=`${k?`${k}, `:""}${c} ${l}ms linear ${i}ms 1 both`,pe+=1,c}function Ie(e,n){const t=(e.style.animation||"").split(", "),l=t.filter(n?a=>a.indexOf(n)<0:a=>a.indexOf("__svelte")===-1),i=t.length-l.length;i&&(e.style.animation=l.join(", "),pe-=i,pe||On())}function On(){Fe(()=>{pe||(ye.forEach(e=>{const{ownerNode:n}=e.stylesheet;n&&D(n)}),ye.clear())})}let be;function ge(e){be=e}function Ue(){if(!be)throw new Error("Function called outside component initialization");return be}function Nt(e){Ue().$$.on_mount.push(e)}function At(e){Ue().$$.after_update.push(e)}function Bt(e){Ue().$$.on_destroy.push(e)}const ae=[],ce=[];let fe=[];const Ee=[],pn=Promise.resolve();let Ne=!1;function vn(){Ne||(Ne=!0,pn.then(In))}function Un(){return vn(),pn}function de(e){fe.push(e)}function jn(e){Ee.push(e)}const Se=new Set;let se=0;function In(){if(se!==0)return;const e=be;do{try{for(;se<ae.length;){const n=ae[se];se++,ge(n),qn(n.$$)}}catch(n){throw ae.length=0,se=0,n}for(ge(null),ae.length=0,se=0;ce.length;)ce.pop()();for(let n=0;n<fe.length;n+=1){const t=fe[n];Se.has(t)||(Se.add(t),t())}fe.length=0}while(ae.length);for(;Ee.length;)Ee.pop()();Ne=!1,Se.clear(),ge(e)}function qn(e){if(e.fragment!==null){e.update(),G(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(de)}}function Hn(e){const n=[],t=[];fe.forEach(l=>e.indexOf(l)===-1?n.push(l):t.push(l)),t.forEach(l=>l()),fe=n}let he;function je(){return he||(he=Promise.resolve(),he.then(()=>{he=null})),he}function $(e,n,t){e.dispatchEvent(Dn(`${n?"intro":"outro"}${t}`))}const Ce=new Set;let Z;function Q(){Z={r:0,c:[],p:Z}}function X(){Z.r||G(Z.c),Z=Z.p}function M(e,n){e&&e.i&&(Ce.delete(e),e.i(n))}function N(e,n,t,l){if(e&&e.o){if(Ce.has(e))return;Ce.add(e),Z.c.push(()=>{Ce.delete(e),l&&(t&&e.d(1),l())}),e.o(n)}else l&&l()}const qe={duration:0};function Dt(e,n,t){const l={direction:"in"};let i=n(e,t,l),a=!1,s,o,f=0;function r(){s&&Ie(e,s)}function u(){const{delay:h=0,duration:C=300,easing:m=De,tick:k=U,css:g}=i||qe;g&&(s=ve(e,0,1,C,h,m,g,f++)),k(0,1);const P=Re()+h,S=P+C;o&&o.abort(),a=!0,de(()=>$(e,!0,"start")),o=Oe(_=>{if(a){if(_>=S)return k(1,0),$(e,!0,"end"),r(),a=!1;if(_>=P){const T=m((_-P)/C);k(T,1-T)}}return a})}let c=!1;return{start(){c||(c=!0,Ie(e),q(i)?(i=i(l),je().then(u)):u())},invalidate(){c=!1},end(){a&&(r(),a=!1)}}}function Rt(e,n,t){const l={direction:"out"};let i=n(e,t,l),a=!0,s;const o=Z;o.r+=1;let f;function r(){const{delay:u=0,duration:c=300,easing:h=De,tick:C=U,css:m}=i||qe;m&&(s=ve(e,1,0,c,u,h,m));const k=Re()+u,g=k+c;de(()=>$(e,!1,"start")),"inert"in e&&(f=e.inert,e.inert=!0),Oe(P=>{if(a){if(P>=g)return C(0,1),$(e,!1,"end"),--o.r||G(o.c),!1;if(P>=k){const S=h((P-k)/c);C(1-S,S)}}return a})}return q(i)?je().then(()=>{i=i(l),r()}):r(),{end(u){u&&"inert"in e&&(e.inert=f),u&&i.tick&&i.tick(1,0),a&&(s&&Ie(e,s),a=!1)}}}function Ft(e,n,t,l){let a=n(e,t,{direction:"both"}),s=l?0:1,o=null,f=null,r=null,u;function c(){r&&Ie(e,r)}function h(m,k){const g=m.b-s;return k*=Math.abs(g),{a:s,b:m.b,d:g,duration:k,start:m.start,end:m.start+k,group:m.group}}function C(m){const{delay:k=0,duration:g=300,easing:P=De,tick:S=U,css:_}=a||qe,T={start:Re()+k,b:m};m||(T.group=Z,Z.r+=1),"inert"in e&&(m?u!==void 0&&(e.inert=u):(u=e.inert,e.inert=!0)),o||f?f=T:(_&&(c(),r=ve(e,s,m,g,k,P,_)),m&&S(0,1),o=h(T,g),de(()=>$(e,m,"start")),Oe(w=>{if(f&&w>f.start&&(o=h(f,g),f=null,$(e,o.b,"start"),_&&(c(),r=ve(e,s,o.b,o.duration,0,P,a.css))),o){if(w>=o.end)S(s=o.b,1-s),$(e,o.b,"end"),f||(o.b?c():--o.group.r||G(o.group.c)),o=null;else if(w>=o.start){const p=w-o.start;s=o.a+o.d*P(p/o.duration),S(s,1-s)}}return!!(o||f)}))}return{run(m){q(a)?je().then(()=>{a=a({direction:m?"in":"out"}),C(m)}):C(m)},end(){c(),o=f=null}}}function oe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Vn(e,n){e.d(1),n.delete(e.key)}function Ae(e,n){N(e,1,1,()=>{n.delete(e.key)})}function Ot(e,n){e.f(),Ae(e,n)}function Be(e,n,t,l,i,a,s,o,f,r,u,c){let h=e.length,C=a.length,m=h;const k={};for(;m--;)k[e[m].key]=m;const g=[],P=new Map,S=new Map,_=[];for(m=C;m--;){const v=c(i,a,m),R=t(v);let j=s.get(R);j?l&&_.push(()=>j.p(v,n)):(j=r(R,v),j.c()),P.set(R,g[m]=j),R in k&&S.set(R,Math.abs(m-k[R]))}const T=new Set,w=new Set;function p(v){M(v,1),v.m(o,u),s.set(v.key,v),u=v.first,C--}for(;h&&C;){const v=g[C-1],R=e[h-1],j=v.key,H=R.key;v===R?(u=v.first,h--,C--):P.has(H)?!s.has(j)||T.has(j)?p(v):w.has(H)?h--:S.get(j)>S.get(H)?(w.add(j),p(v)):(T.add(H),h--):(f(R,s),h--)}for(;h--;){const v=e[h];P.has(v.key)||f(v,s)}for(;C;)p(g[C-1]);return G(_),g}function zn(e,n,t){const l=e.$$.props[n];l!==void 0&&(e.$$.bound[l]=t,t(e.$$.ctx[l]))}function W(e){e&&e.c()}function z(e,n,t){const{fragment:l,after_update:i}=e.$$;l&&l.m(n,t),de(()=>{const a=e.$$.on_mount.map(mn).filter(q);e.$$.on_destroy?e.$$.on_destroy.push(...a):G(a),e.$$.on_mount=[]}),i.forEach(de)}function K(e,n){const t=e.$$;t.fragment!==null&&(Hn(t.after_update),G(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Kn(e,n){e.$$.dirty[0]===-1&&(ae.push(e),vn(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function ne(e,n,t,l,i,a,s=null,o=[-1]){const f=be;ge(e);const r=e.$$={fragment:null,ctx:[],props:a,update:U,not_equal:i,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:ze(),dirty:o,skip_bound:!1,root:n.target||f.$$.root};s&&s(r.root);let u=!1;if(r.ctx=t?t(e,n.props||{},(c,h,...C)=>{const m=C.length?C[0]:h;return r.ctx&&i(r.ctx[c],r.ctx[c]=m)&&(!r.skip_bound&&r.bound[c]&&r.bound[c](m),u&&Kn(e,c)),h}):[],r.update(),u=!0,G(r.before_update),r.fragment=l?l(r.ctx):!1,n.target){if(n.hydrate){const c=Bn(n.target);r.fragment&&r.fragment.l(c),c.forEach(D)}else r.fragment&&r.fragment.c();n.intro&&M(e.$$.fragment),z(e,n.target,n.anchor),In()}ge(f)}class te{constructor(){Te(this,"$$");Te(this,"$$set")}$destroy(){K(this,1),this.$destroy=U}$on(n,t){if(!q(t))return U;const l=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return l.push(t),()=>{const i=l.indexOf(t);i!==-1&&l.splice(i,1)}}$set(n){this.$$set&&!En(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const Wn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Wn);function Pn(e,n){function t(i){i.relatedTarget instanceof Node&&!e.contains(i.relatedTarget)&&n()}function l(i){i.target instanceof Node&&!e.contains(i.target)&&n()}return document.addEventListener("mousedown",l,{capture:!0,passive:!0}),e.addEventListener("focusout",t),{update(i){n=i},destroy(){document.removeEventListener("mousedown",l,{capture:!0}),e.removeEventListener("focusout",t)}}}function Gn(e,n){const t=i=>{i.stopPropagation(),i.preventDefault()},l=i=>{i?(e.classList.add("local-mail-busy"),e.addEventListener("keydown",t,{capture:!0})):(e.classList.remove("local-mail-busy"),e.removeEventListener("keydown",t,{capture:!0}))};return l(n),{update:l,destroy(){l(!1)}}}function He(){return window.M.cfg.wwwroot+"/local/mail/"}function Ut(e,n=[],t){const l=new URL(He()+"create.php");return e&&l.searchParams.set("course",String(e)),n.length&&l.searchParams.set("recipients",n.join(",")),t&&l.searchParams.set("role",t),l.searchParams.set("sesskey",window.M.cfg.sesskey),l.toString()}function jt(e){const n=new URL(He()+"download.php");return n.searchParams.set("m",String(e)),n.toString()}function qt(){const e=new URL(window.location.href),n={tray:e.searchParams.get("t")||void 0,courseid:parseInt(e.searchParams.get("c")||"")||void 0,labelid:parseInt(e.searchParams.get("l")||"")||void 0,messageid:parseInt(e.searchParams.get("m")||"")||void 0,offset:parseInt(e.searchParams.get("o")||"")||void 0,dialog:e.searchParams.get("d")||void 0},t={content:e.searchParams.get("s")||void 0,sendername:e.searchParams.get("sf")||void 0,recipientname:e.searchParams.get("st")||void 0,unread:e.searchParams.get("su")=="1"||void 0,withfilesonly:e.searchParams.get("sa")=="1"||void 0,maxtime:parseInt(e.searchParams.get("sd")||"")||void 0,startid:parseInt(e.searchParams.get("ss")||"")||void 0,reverse:e.searchParams.get("sr")=="1"||void 0};return Object.values(t).some(l=>l!=null)?{...n,search:t}:n}function Ht(e,n){const t=new URL(Pe(e));t.search!=window.location.search&&(n?window.history.replaceState(void 0,"",t.toString()):window.history.pushState(void 0,"",t.toString()))}function Pe(e){var t,l,i,a,s,o,f,r;const n=new URL(He()+"view.php");return e.tray&&n.searchParams.set("t",e.tray),e.courseid&&n.searchParams.set("c",String(e.courseid)),e.tray=="label"&&e.labelid&&n.searchParams.set("l",String(e.labelid)),e.messageid&&n.searchParams.set("m",String(e.messageid)),e.offset&&n.searchParams.set("o",String(e.offset)),(t=e.search)!=null&&t.content&&n.searchParams.set("s",e.search.content),(l=e.search)!=null&&l.sendername&&n.searchParams.set("sf",e.search.sendername),(i=e.search)!=null&&i.recipientname&&n.searchParams.set("st",e.search.recipientname),(a=e.search)!=null&&a.unread&&n.searchParams.set("su","1"),(s=e.search)!=null&&s.withfilesonly&&n.searchParams.set("sa","1"),(o=e.search)!=null&&o.maxtime&&n.searchParams.set("sd",String(e.search.maxtime)),(f=e.search)!=null&&f.startid&&n.searchParams.set("ss",String(e.search.startid)),(r=e.search)!=null&&r.reverse&&n.searchParams.set("sr","1"),e.dialog&&n.searchParams.set("d",e.dialog),n.toString()}const Vt=["","blue","indigo","purple","pink","red","orange","yellow","green","teal","cyan"];function We(e){const n=document.createElement("DIV");return n.innerHTML=e,n.innerText||""}function zt(e){if(e==0)return"";const n=new Date(e*1e3);return[String(n.getFullYear()),String(n.getMonth()+1).padStart(2,"0"),String(n.getDate()).padStart(2,"0")].join("-")}function _e(e,n){return e?n=="shortname"?We(e.shortname):We(e.fullname):""}function me(e){return new Intl.NumberFormat(window.M.str.langconfig.localecldr).format(e)}function Kt(e){const n=[{bytes:1099511627776,name:"TB"},{bytes:1073741824,name:"GB"},{bytes:1048576,name:"MB"},{bytes:1024,name:"KB"}];for(const t of n)if(e>=t.bytes)return`${Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format(e/t.bytes)} ${t.name}`;return`${e} B`}function Wt(e){return e.trim().replaceAll(/\s+/gu," ")}function Gt(e,n){if(e=e||"",typeof n=="string"||typeof n=="number")e=e.replace("{$a}",n.toString());else for(const t in n)e=e.replace(`{$a->${t}}`,n[t].toString());return e}function Yt(e){return e?Math.floor(new Date(parseInt(e.slice(0,4)),parseInt(e.slice(5,7))-1,parseInt(e.slice(8,10)),23,59,59).getTime()/1e3):0}function Yn(e){let n,t,l,i,a=e[0].compose+"",s,o,f,r;return{c(){n=E("button"),t=E("i"),l=O(),i=E("span"),s=Y(a),b(t,"class","fa fa-edit mr-0 mr-sm-1"),A(i,"d-none",e[1]),b(n,"type","button"),b(n,"class","btn btn-primary text-truncate px-2 px-sm-3"),b(n,"aria-label",o=e[0].compose),A(n,"flex-shrink-0",e[1])},m(u,c){F(u,n,c),L(n,t),L(n,l),L(n,i),L(i,s),f||(r=V(n,"click",function(){q(e[2])&&e[2].apply(this,arguments)}),f=!0)},p(u,[c]){e=u,c&1&&a!==(a=e[0].compose+"")&&x(s,a),c&2&&A(i,"d-none",e[1]),c&1&&o!==(o=e[0].compose)&&b(n,"aria-label",o),c&2&&A(n,"flex-shrink-0",e[1])},i:U,o:U,d(u){u&&D(n),f=!1,r()}}}function Jn(e,n,t){let{strings:l}=n,{iconOnly:i=!1}=n,{onClick:a}=n;return e.$$set=s=>{"strings"in s&&t(0,l=s.strings),"iconOnly"in s&&t(1,i=s.iconOnly),"onClick"in s&&t(2,a=s.onClick)},[l,i,a]}class Qn extends te{constructor(n){super(),ne(this,n,Jn,Yn,ee,{strings:0,iconOnly:1,onClick:2})}}function Ve(e,n){function t(){e.offsetWidth<e.scrollWidth?e.setAttribute("title",n):e.removeAttribute("title")}return e.style.overflow="hidden",e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.addEventListener("mouseenter",t),{update(l){n=l},destroy(){e.removeEventListener("mouseenter",t,!0)}}}const Xn=e=>({}),Ge=e=>({});function Zn(e){let n,t,l,i,a,s;return{c(){n=E("div"),t=Y(e[10]),b(n,"class",l="local-mail-combo-box-readonly form-control "+e[11]+" svelte-1sayswp"),A(n,"local-mail-combo-box-readonly-default",e[11]=="")},m(o,f){F(o,n,f),L(n,t),a||(s=ue(i=Ve.call(null,n,e[10])),a=!0)},p(o,f){f&1024&&x(t,o[10]),f&2048&&l!==(l="local-mail-combo-box-readonly form-control "+o[11]+" svelte-1sayswp")&&b(n,"class",l),i&&q(i.update)&&f&1024&&i.update.call(null,o[10]),f&2048&&A(n,"local-mail-combo-box-readonly-default",o[11]=="")},i:U,o:U,d(o){o&&D(n),a=!1,s()}}}function xn(e){let n,t,l,i,a,s;const o=e[25].buttonContent,f=hn(o,e,e[24],Ge),r=f||et(e);return{c(){n=E("button"),r&&r.c(),b(n,"type","button"),b(n,"class",t="local-mail-combo-box-button form-control btn "+e[9]+" svelte-1sayswp"),A(n,"local-mail-combo-box-button-default",e[9]==""),A(n,"local-mail-combo-box-padding-for-one-icon",e[4]&&!e[6]),A(n,"local-mail-combo-box-padding-for-two-icons",e[6])},m(u,c){F(u,n,c),r&&r.m(n,null),i=!0,a||(s=[ue(l=Ve.call(null,n,e[8])),V(n,"click",function(){q(e[18])&&e[18].apply(this,arguments)})],a=!0)},p(u,c){e=u,f?f.p&&(!i||c&16777216)&&bn(f,o,e,e[24],i?_n(o,e[24],c,Xn):kn(e[24]),Ge):r&&r.p&&(!i||c&256)&&r.p(e,i?c:-1),(!i||c&512&&t!==(t="local-mail-combo-box-button form-control btn "+e[9]+" svelte-1sayswp"))&&b(n,"class",t),l&&q(l.update)&&c&256&&l.update.call(null,e[8]),(!i||c&512)&&A(n,"local-mail-combo-box-button-default",e[9]==""),(!i||c&592)&&A(n,"local-mail-combo-box-padding-for-one-icon",e[4]&&!e[6]),(!i||c&576)&&A(n,"local-mail-combo-box-padding-for-two-icons",e[6])},i(u){i||(M(r,u),i=!0)},o(u){N(r,u),i=!1},d(u){u&&D(n),r&&r.d(u),a=!1,G(s)}}}function $n(e){let n,t,l;return{c(){n=E("input"),b(n,"type","text"),b(n,"class","local-mail-combo-box-input form-control svelte-1sayswp"),b(n,"placeholder",e[2]),b(n,"aria-label",e[2]),A(n,"local-mail-combo-box-padding-for-one-icon",e[4]||e[6]),A(n,"local-mail-combo-box-padding-for-two-icons",e[4]&&e[6]),A(n,"is-invalid",e[12])},m(i,a){F(i,n,a),e[26](n),Ke(n,e[0]),t||(l=[V(n,"input",e[27]),V(n,"focus",function(){q(e[13])&&e[13].apply(this,arguments)}),V(n,"input",e[28]),V(n,"keyup",e[21])],t=!0)},p(i,a){e=i,a&4&&b(n,"placeholder",e[2]),a&4&&b(n,"aria-label",e[2]),a&1&&n.value!==e[0]&&Ke(n,e[0]),a&80&&A(n,"local-mail-combo-box-padding-for-one-icon",e[4]||e[6]),a&80&&A(n,"local-mail-combo-box-padding-for-two-icons",e[4]&&e[6]),a&4096&&A(n,"is-invalid",e[12])},i:U,o:U,d(i){i&&D(n),e[26](null),t=!1,G(l)}}}function et(e){let n;return{c(){n=Y(e[8])},m(t,l){F(t,n,l)},p(t,l){l&256&&x(n,t[8])},d(t){t&&D(n)}}}function Ye(e){let n,t,l,i,a;return{c(){n=E("button"),t=E("i"),b(t,"class",l="fa fa-fw "+e[6]+" svelte-1sayswp"),b(t,"aria-hidden","true"),b(n,"type","button"),b(n,"class","local-mail-combo-box-middle-icon btn svelte-1sayswp"),b(n,"title",e[7])},m(s,o){F(s,n,o),L(n,t),i||(a=V(n,"click",function(){q(e[17])&&e[17].apply(this,arguments)}),i=!0)},p(s,o){e=s,o&64&&l!==(l="fa fa-fw "+e[6]+" svelte-1sayswp")&&b(t,"class",l),o&128&&b(n,"title",e[7])},d(s){s&&D(n),i=!1,a()}}}function Je(e){let n,t,l,i,a;return{c(){n=E("button"),t=E("i"),b(t,"class",l="fa fa-fw "+e[4]+" svelte-1sayswp"),b(t,"aria-hidden","true"),b(n,"type","button"),b(n,"class","local-mail-combo-box-right-icon btn svelte-1sayswp"),b(n,"title",e[5])},m(s,o){F(s,n,o),L(n,t),i||(a=V(n,"click",function(){q(e[16])&&e[16].apply(this,arguments)}),i=!0)},p(s,o){e=s,o&16&&l!==(l="fa fa-fw "+e[4]+" svelte-1sayswp")&&b(t,"class",l),o&32&&b(n,"title",e[5])},d(s){s&&D(n),i=!1,a()}}}function nt(e){let n,t,l,i,a,s,o,f,r,u,c,h,C,m;const k=[$n,xn,Zn],g=[];function P(p,v){return p[1]=="input"?0:p[1]=="button"?1:2}s=P(e),o=g[s]=k[s](e);let S=e[6]&&Ye(e),_=e[4]&&Je(e);const T=e[25].default,w=hn(T,e,e[24],null);return{c(){n=E("div"),t=E("div"),l=E("i"),a=O(),o.c(),f=O(),S&&S.c(),r=O(),_&&_.c(),u=O(),w&&w.c(),b(l,"class",i="fa fa-fw "+e[3]+" svelte-1sayswp"),b(l,"aria-hidden","true"),b(t,"class","local-mail-combo-box-left-icon svelte-1sayswp"),b(n,"class","local-mail-combo-box svelte-1sayswp")},m(p,v){F(p,n,v),L(n,t),L(t,l),L(n,a),g[s].m(n,null),L(n,f),S&&S.m(n,null),L(n,r),_&&_.m(n,null),L(n,u),w&&w.m(n,null),e[29](n),h=!0,C||(m=ue(c=Pn.call(null,n,e[30])),C=!0)},p(p,[v]){(!h||v&8&&i!==(i="fa fa-fw "+p[3]+" svelte-1sayswp"))&&b(l,"class",i);let R=s;s=P(p),s===R?g[s].p(p,v):(Q(),N(g[R],1,1,()=>{g[R]=null}),X(),o=g[s],o?o.p(p,v):(o=g[s]=k[s](p),o.c()),M(o,1),o.m(n,f)),p[6]?S?S.p(p,v):(S=Ye(p),S.c(),S.m(n,r)):S&&(S.d(1),S=null),p[4]?_?_.p(p,v):(_=Je(p),_.c(),_.m(n,u)):_&&(_.d(1),_=null),w&&w.p&&(!h||v&16777216)&&bn(w,T,p,p[24],h?_n(T,p[24],v,null):kn(p[24]),null),c&&q(c.update)&&v&16384&&c.update.call(null,p[30])},i(p){h||(M(o),M(w,p),h=!0)},o(p){N(o),N(w,p),h=!1},d(p){p&&D(n),g[s].d(),S&&S.d(),_&&_.d(),w&&w.d(p),e[29](null),C=!1,m()}}}function tt(e,n,t){let{$$slots:l={},$$scope:i}=n,{mode:a="input"}=n,{inputText:s}=n,{inputPlaceholder:o}=n,{leftIconClass:f}=n,{rightIconClass:r=""}=n,{rightIconLabel:u=""}=n,{middleIconClass:c=""}=n,{middleIconLabel:h=""}=n,{buttonText:C=""}=n,{buttonClass:m=""}=n,{readonlyText:k=""}=n,{readonlyClass:g=""}=n,{invalid:P=!1}=n,{onFocus:S=null}=n,{onBlur:_=null}=n,{onInput:T=null}=n,{onEnter:w=null}=n,{onRightIconClick:p=null}=n,{onMiddleIconClick:v=null}=n,{onButtonClick:R=null}=n;const j=async()=>{await Un(),J.focus()};let H,J;const ie=I=>{I.key=="Enter"?w==null||w():I.key=="Escape"&&(J.blur(),_==null||_())};function y(I){ce[I?"unshift":"push"](()=>{J=I,t(20,J)})}function d(){s=this.value,t(0,s)}const B=()=>T==null?void 0:T(s);function ke(I){ce[I?"unshift":"push"](()=>{H=I,t(19,H)})}const Tn=()=>_==null?void 0:_();return e.$$set=I=>{"mode"in I&&t(1,a=I.mode),"inputText"in I&&t(0,s=I.inputText),"inputPlaceholder"in I&&t(2,o=I.inputPlaceholder),"leftIconClass"in I&&t(3,f=I.leftIconClass),"rightIconClass"in I&&t(4,r=I.rightIconClass),"rightIconLabel"in I&&t(5,u=I.rightIconLabel),"middleIconClass"in I&&t(6,c=I.middleIconClass),"middleIconLabel"in I&&t(7,h=I.middleIconLabel),"buttonText"in I&&t(8,C=I.buttonText),"buttonClass"in I&&t(9,m=I.buttonClass),"readonlyText"in I&&t(10,k=I.readonlyText),"readonlyClass"in I&&t(11,g=I.readonlyClass),"invalid"in I&&t(12,P=I.invalid),"onFocus"in I&&t(13,S=I.onFocus),"onBlur"in I&&t(14,_=I.onBlur),"onInput"in I&&t(15,T=I.onInput),"onEnter"in I&&t(22,w=I.onEnter),"onRightIconClick"in I&&t(16,p=I.onRightIconClick),"onMiddleIconClick"in I&&t(17,v=I.onMiddleIconClick),"onButtonClick"in I&&t(18,R=I.onButtonClick),"$$scope"in I&&t(24,i=I.$$scope)},[s,a,o,f,r,u,c,h,C,m,k,g,P,S,_,T,p,v,R,H,J,ie,w,j,i,l,y,d,B,ke,Tn]}class lt extends te{constructor(n){super(),ne(this,n,tt,nt,ee,{mode:1,inputText:0,inputPlaceholder:2,leftIconClass:3,rightIconClass:4,rightIconLabel:5,middleIconClass:6,middleIconLabel:7,buttonText:8,buttonClass:9,readonlyText:10,readonlyClass:11,invalid:12,onFocus:13,onBlur:14,onInput:15,onEnter:22,onRightIconClick:16,onMiddleIconClick:17,onButtonClick:18,focus:23})}get focus(){return this.$$.ctx[23]}}function Qe(e,n,t){const l=e.slice();return l[27]=n[t],l}function Xe(e){let n,t=e[0].allcourses+"",l,i,a,s,o;return{c(){n=E("button"),l=Y(t),i=O(),a=E("div"),b(n,"type","button"),b(n,"class","dropdown-item text-truncate"),b(a,"class","dropdown-divider")},m(f,r){F(f,n,r),L(n,l),F(f,i,r),F(f,a,r),s||(o=V(n,"click",e[22]),s=!0)},p(f,r){r&1&&t!==(t=f[0].allcourses+"")&&x(l,t)},d(f){f&&(D(n),D(i),D(a)),s=!1,o()}}}function Ze(e){let n,t=e[0].nocoursematchestext+"",l,i;return{c(){n=E("div"),l=Y(t),i=O(),b(n,"class","px-4 text-danger")},m(a,s){F(a,n,s),L(n,l),L(n,i)},p(a,s){s&1&&t!==(t=a[0].nocoursematchestext+"")&&x(l,t)},d(a){a&&D(n)}}}function xe(e){let n,t=me(e[27].unread)+"",l;return{c(){n=E("span"),l=Y(t),b(n,"class","badge pl-3 ml-auto")},m(i,a){F(i,n,a),L(n,l)},p(i,a){a&1024&&t!==(t=me(i[27].unread)+"")&&x(l,t)},d(i){i&&D(n)}}}function $e(e,n){let t,l,i=n[9](n[27])+"",a,s,o,f,r=n[27].unread>0&&xe(n);function u(){return n[23](n[27])}return{key:e,first:null,c(){t=E("button"),l=E("span"),a=O(),r&&r.c(),s=O(),b(l,"class","text-truncate"),b(t,"type","button"),b(t,"class","local-mail-select-course-item dropdown-item d-flex align-items-center svelte-1utiu3a"),this.first=t},m(c,h){F(c,t,h),L(t,l),l.innerHTML=i,L(t,a),r&&r.m(t,null),L(t,s),o||(f=V(t,"click",u),o=!0)},p(c,h){n=c,h&1536&&i!==(i=n[9](n[27])+"")&&(l.innerHTML=i),n[27].unread>0?r?r.p(n,h):(r=xe(n),r.c(),r.m(t,s)):r&&(r.d(1),r=null)},d(c){c&&D(t),r&&r.d(),o=!1,f()}}}function it(e){let n,t,l=[],i=new Map,a,s=!e[2]&&Xe(e),o=oe(e[10]);const f=u=>u[27].id;for(let u=0;u<o.length;u+=1){let c=Qe(e,o,u),h=f(c);i.set(h,l[u]=$e(h,c))}let r=null;return o.length||(r=Ze(e)),{c(){n=E("div"),s&&s.c(),t=O();for(let u=0;u<l.length;u+=1)l[u].c();r&&r.c(),b(n,"class",a="dropdown-menu dropdown-menu-"+e[5]+" svelte-1utiu3a"),A(n,"show",e[8])},m(u,c){F(u,n,c),s&&s.m(n,null),L(n,t);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(n,null);r&&r.m(n,null)},p(u,c){u[2]?s&&(s.d(1),s=null):s?s.p(u,c):(s=Xe(u),s.c(),s.m(n,t)),c&34305&&(o=oe(u[10]),l=Be(l,c,f,1,u,o,i,n,Vn,$e,null,Qe),!o.length&&r?r.p(u,c):o.length?r&&(r.d(1),r=null):(r=Ze(u),r.c(),r.m(n,null))),c&32&&a!==(a="dropdown-menu dropdown-menu-"+u[5]+" svelte-1utiu3a")&&b(n,"class",a),c&288&&A(n,"show",u[8])},d(u){u&&D(n),s&&s.d();for(let c=0;c<l.length;c+=1)l[c].d();r&&r.d()}}}function st(e){let n,t,l;function i(s){e[25](s)}let a={mode:e[3]?"readonly":e[8]?"input":"button",inputPlaceholder:e[0].course,leftIconClass:"fa-graduation-cap",rightIconClass:e[3]?"":e[8]?e[6]?"fa-times":"fa-caret-up":"fa-caret-down",rightIconLabel:e[8]&&e[6]?e[0].clearsearch:e[0].changecourse,buttonText:e[11]||e[1],buttonClass:e[4],readonlyText:e[11]||e[1],readonlyClass:"alert-secondary",onBlur:e[13],onButtonClick:e[12],onRightIconClick:e[8]?e[13]:e[12],$$slots:{default:[it]},$$scope:{ctx:e}};return e[6]!==void 0&&(a.inputText=e[6]),n=new lt({props:a}),e[24](n),ce.push(()=>zn(n,"inputText",i)),{c(){W(n.$$.fragment)},m(s,o){z(n,s,o),l=!0},p(s,[o]){const f={};o&264&&(f.mode=s[3]?"readonly":s[8]?"input":"button"),o&1&&(f.inputPlaceholder=s[0].course),o&328&&(f.rightIconClass=s[3]?"":s[8]?s[6]?"fa-times":"fa-caret-up":"fa-caret-down"),o&321&&(f.rightIconLabel=s[8]&&s[6]?s[0].clearsearch:s[0].changecourse),o&2050&&(f.buttonText=s[11]||s[1]),o&16&&(f.buttonClass=s[4]),o&2050&&(f.readonlyText=s[11]||s[1]),o&256&&(f.onRightIconClick=s[8]?s[13]:s[12]),o&1073743653&&(f.$$scope={dirty:o,ctx:s}),!t&&o&64&&(t=!0,f.inputText=s[6],jn(()=>t=!1)),n.$set(f)},i(s){l||(M(n.$$.fragment,s),l=!0)},o(s){N(n.$$.fragment,s),l=!1},d(s){e[24](null),K(n,s)}}}function at(e,n,t){let l,i,a,s,{settings:o}=n,{strings:f}=n,{courses:r}=n,{label:u}=n,{selected:c}=n,{required:h=!1}=n,{readonly:C=!1}=n,{buttonClass:m=""}=n,{dropdownAlign:k="left"}=n,{onChange:g}=n,P,S,_=!1,T="";const w=d=>d.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),p=()=>{t(6,T=""),t(8,_=!0),P.focus()},v=()=>{t(8,_=!1),t(6,T="")},R=async()=>{await g(),t(16,c=void 0),v()},j=async d=>{await g(d.id),t(16,c=d.id),v()},H=()=>R(),J=d=>j(d);function ie(d){ce[d?"unshift":"push"](()=>{P=d,t(7,P)})}function y(d){T=d,t(6,T)}return e.$$set=d=>{"settings"in d&&t(17,o=d.settings),"strings"in d&&t(0,f=d.strings),"courses"in d&&t(18,r=d.courses),"label"in d&&t(1,u=d.label),"selected"in d&&t(16,c=d.selected),"required"in d&&t(2,h=d.required),"readonly"in d&&t(3,C=d.readonly),"buttonClass"in d&&t(4,m=d.buttonClass),"dropdownAlign"in d&&t(5,k=d.dropdownAlign),"onChange"in d&&t(19,g=d.onChange)},e.$$.update=()=>{e.$$.dirty&327680&&t(20,S=r.find(d=>d.id==c)),e.$$.dirty&1179648&&t(11,l=_e(S,o.filterbycourse)),e.$$.dirty&64&&t(21,i=new RegExp(w(T.trim()).replaceAll(/\s+/gu,"\\s+"),"giu")),e.$$.dirty&2490368&&t(10,a=r.filter(d=>_e(d,o.filterbycourse).match(i))),e.$$.dirty&2228224&&t(9,s=d=>_e(d,o.filterbycourse).replaceAll(i,B=>B.trim()?"<mark>"+B+"</mark>":B))},[f,u,h,C,m,k,T,P,_,s,a,l,p,v,R,j,c,o,r,g,S,i,H,J,ie,y]}class ot extends te{constructor(n){super(),ne(this,n,at,st,ee,{settings:17,strings:0,courses:18,label:1,selected:16,required:2,readonly:3,buttonClass:4,dropdownAlign:5,onChange:19})}}function en(e){let n,t=me(e[3])+"",l;return{c(){n=E("span"),l=Y(t),b(n,"class","badge")},m(i,a){F(i,n,a),L(n,l)},p(i,a){a&8&&t!==(t=me(i[3])+"")&&x(l,t)},d(i){i&&D(n)}}}function rt(e){let n,t,l,i,a,s,o,f,r,u,c,h,C,m=e[3]>0&&en(e);return{c(){n=E("a"),t=E("i"),a=O(),s=E("span"),o=Y(e[1]),r=O(),m&&m.c(),b(t,"class",l="fa "+e[0]+" fa-fw svelte-ath4bf"),b(t,"aria-hidden","true"),b(t,"style",i=e[6]&&!e[5]?`color: var(--local-mail-color-${e[6]}-bg)`:""),b(s,"class","flex-fill px-2"),b(n,"class","local-mail-menu-item list-group-item list-group-item-action d-flex align-items-center px-3 py-2 svelte-ath4bf"),b(n,"aria-current",e[5]),b(n,"aria-disabled",e[4]),b(n,"role","tab"),b(n,"href",u=Pe(e[2])),b(n,"style",c=e[6]&&!e[5]?`color: var(--local-mail-color-${e[6]}-fg)`:""),A(n,"list-group-item-primary",e[5]),A(n,"disabled",e[4])},m(k,g){F(k,n,g),L(n,t),L(n,a),L(n,s),L(s,o),L(n,r),m&&m.m(n,null),h||(C=[ue(f=Ve.call(null,s,e[1])),V(n,"click",e[7])],h=!0)},p(k,[g]){g&1&&l!==(l="fa "+k[0]+" fa-fw svelte-ath4bf")&&b(t,"class",l),g&96&&i!==(i=k[6]&&!k[5]?`color: var(--local-mail-color-${k[6]}-bg)`:"")&&b(t,"style",i),g&2&&x(o,k[1]),f&&q(f.update)&&g&2&&f.update.call(null,k[1]),k[3]>0?m?m.p(k,g):(m=en(k),m.c(),m.m(n,null)):m&&(m.d(1),m=null),g&32&&b(n,"aria-current",k[5]),g&16&&b(n,"aria-disabled",k[4]),g&4&&u!==(u=Pe(k[2]))&&b(n,"href",u),g&96&&c!==(c=k[6]&&!k[5]?`color: var(--local-mail-color-${k[6]}-fg)`:"")&&b(n,"style",c),g&32&&A(n,"list-group-item-primary",k[5]),g&16&&A(n,"disabled",k[4])},i:U,o:U,d(k){k&&D(n),m&&m.d(),h=!1,G(C)}}}function ft(e,n,t){let{icon:l}=n,{text:i}=n,{params:a}=n,{count:s=0}=n,{disabled:o=!1}=n,{active:f=!1}=n,{color:r=void 0}=n,{onClick:u=void 0}=n;const c=h=>{u&&(h.preventDefault(),u(a))};return e.$$set=h=>{"icon"in h&&t(0,l=h.icon),"text"in h&&t(1,i=h.text),"params"in h&&t(2,a=h.params),"count"in h&&t(3,s=h.count),"disabled"in h&&t(4,o=h.disabled),"active"in h&&t(5,f=h.active),"color"in h&&t(6,r=h.color),"onClick"in h&&t(8,u=h.onClick)},[l,i,a,s,o,f,r,c,u]}class le extends te{constructor(n){super(),ne(this,n,ft,rt,ee,{icon:0,text:1,params:2,count:3,disabled:4,active:5,color:6,onClick:8})}}function nn(e,n,t){const l=e.slice();return l[18]=n[t],l}function tn(e,n,t){const l=e.slice();return l[21]=n[t],l}function ln(e){let n,t;return n=new ot({props:{settings:e[0],strings:e[1],courses:e[2],label:e[1].allcourses,selected:e[4].courseid,buttonClass:"btn-secondary",onChange:e[7]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const a={};i&1&&(a.settings=l[0]),i&2&&(a.strings=l[1]),i&4&&(a.courses=l[2]),i&2&&(a.label=l[1].allcourses),i&16&&(a.selected=l[4].courseid),i&128&&(a.onChange=l[7]),n.$set(a)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function sn(e){let n,t;return n=new le({props:{icon:"fa-star",text:e[1].starredplural,params:{tray:"starred",courseid:e[10],search:e[9]},active:e[4].tray=="starred",onClick:e[6]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const a={};i&2&&(a.text=l[1].starredplural),i&1536&&(a.params={tray:"starred",courseid:l[10],search:l[9]}),i&16&&(a.active=l[4].tray=="starred"),i&64&&(a.onClick=l[6]),n.$set(a)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function an(e){let n,t;return n=new le({props:{icon:"fa-paper-plane",text:e[1].sentplural,params:{tray:"sent",courseid:e[10],search:e[9]},active:e[4].tray=="sent",onClick:e[6]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const a={};i&2&&(a.text=l[1].sentplural),i&1536&&(a.params={tray:"sent",courseid:l[10],search:l[9]}),i&16&&(a.active=l[4].tray=="sent"),i&64&&(a.onClick=l[6]),n.$set(a)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function on(e){var l;let n,t;return n=new le({props:{icon:"fa-file",text:e[1].drafts,count:e[10]?(l=e[2].find(e[16]))==null?void 0:l.drafts:e[13],params:{tray:"drafts",courseid:e[10],search:e[9]},active:e[4].tray=="drafts",onClick:e[6]}}),{c(){W(n.$$.fragment)},m(i,a){z(n,i,a),t=!0},p(i,a){var o;const s={};a&2&&(s.text=i[1].drafts),a&9220&&(s.count=i[10]?(o=i[2].find(i[16]))==null?void 0:o.drafts:i[13]),a&1536&&(s.params={tray:"drafts",courseid:i[10],search:i[9]}),a&16&&(s.active=i[4].tray=="drafts"),a&64&&(s.onClick=i[6]),n.$set(s)},i(i){t||(M(n.$$.fragment,i),t=!0)},o(i){N(n.$$.fragment,i),t=!1},d(i){K(n,i)}}}function rn(e){let n,t;return n=new le({props:{icon:"fa-trash",text:e[1].trash,params:{tray:"trash",courseid:e[10],search:e[9]},active:e[4].tray=="trash",onClick:e[6]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const a={};i&2&&(a.text=l[1].trash),i&1536&&(a.params={tray:"trash",courseid:l[10],search:l[9]}),i&16&&(a.active=l[4].tray=="trash"),i&64&&(a.onClick=l[6]),n.$set(a)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function fn(e,n){var a;let t,l,i;return l=new le({props:{icon:"fa-tag",text:n[21].name,count:n[10]?(a=n[21].courses.find(n[17]))==null?void 0:a.unread:n[21].unread,color:n[21].color,params:{tray:"label",labelid:n[21].id,courseid:n[10],search:n[9]},active:n[4].tray=="label"&&n[4].labelid==n[21].id,onClick:n[6]}}),{key:e,first:null,c(){t=Me(),W(l.$$.fragment),this.first=t},m(s,o){F(s,t,o),z(l,s,o),i=!0},p(s,o){var r;n=s;const f={};o&8&&(f.text=n[21].name),o&1032&&(f.count=n[10]?(r=n[21].courses.find(n[17]))==null?void 0:r.unread:n[21].unread),o&8&&(f.color=n[21].color),o&1544&&(f.params={tray:"label",labelid:n[21].id,courseid:n[10],search:n[9]}),o&24&&(f.active=n[4].tray=="label"&&n[4].labelid==n[21].id),o&64&&(f.onClick=n[6]),l.$set(f)},i(s){i||(M(l.$$.fragment,s),i=!0)},o(s){N(l.$$.fragment,s),i=!1},d(s){s&&D(t),K(l,s)}}}function un(e){let n,t;return n=new le({props:{icon:"fa-graduation-cap",text:_e(e[18],e[0].coursetraysname),count:e[18].unread,params:e[8]?{tray:"inbox",courseid:e[18].id,search:e[9]}:{tray:"course",courseid:e[18].id,search:e[9]},active:(e[4].tray=="course"||!e[4].tray&&!e[8])&&e[4].courseid==e[18].id,onClick:e[6]}}),{c(){W(n.$$.fragment)},m(l,i){z(n,l,i),t=!0},p(l,i){const a={};i&5&&(a.text=_e(l[18],l[0].coursetraysname)),i&4&&(a.count=l[18].unread),i&772&&(a.params=l[8]?{tray:"inbox",courseid:l[18].id,search:l[9]}:{tray:"course",courseid:l[18].id,search:l[9]}),i&276&&(a.active=(l[4].tray=="course"||!l[4].tray&&!l[8])&&l[4].courseid==l[18].id),i&64&&(a.onClick=l[6]),n.$set(a)},i(l){t||(M(n.$$.fragment,l),t=!0)},o(l){N(n.$$.fragment,l),t=!1},d(l){K(n,l)}}}function cn(e,n){let t,l=n[11](n[18])&&(!n[8]||n[18].id!=n[10]),i,a,s=l&&un(n);return{key:e,first:null,c(){t=Me(),s&&s.c(),i=Me(),this.first=t},m(o,f){F(o,t,f),s&&s.m(o,f),F(o,i,f),a=!0},p(o,f){n=o,f&3332&&(l=n[11](n[18])&&(!n[8]||n[18].id!=n[10])),l?s?(s.p(n,f),f&3332&&M(s,1)):(s=un(n),s.c(),M(s,1),s.m(i.parentNode,i)):s&&(Q(),N(s,1,1,()=>{s=null}),X())},i(o){a||(M(s),a=!0)},o(o){N(s),a=!1},d(o){o&&(D(t),D(i)),s&&s.d(o)}}}function ut(e){var ie;let n,t,l,i,a=e[12]("starred"),s,o=e[12]("sent"),f,r=e[12]("drafts"),u,c=e[12]("trash"),h,C=[],m=new Map,k,g=[],P=new Map,S,_=(e[8]||e[10])&&ln(e);l=new le({props:{icon:"fa-inbox",text:e[1].inbox,count:e[10]?(ie=e[2].find(e[15]))==null?void 0:ie.unread:e[14],params:{tray:"inbox",courseid:e[10],search:e[9]},active:e[4].tray=="inbox",onClick:e[6]}});let T=a&&sn(e),w=o&&an(e),p=r&&on(e),v=c&&rn(e),R=oe(e[3]);const j=y=>y[21].id;for(let y=0;y<R.length;y+=1){let d=tn(e,R,y),B=j(d);m.set(B,C[y]=fn(B,d))}let H=oe(e[2]);const J=y=>y[18].id;for(let y=0;y<H.length;y+=1){let d=nn(e,H,y),B=J(d);P.set(B,g[y]=cn(B,d))}return{c(){n=E("div"),_&&_.c(),t=O(),W(l.$$.fragment),i=O(),T&&T.c(),s=O(),w&&w.c(),f=O(),p&&p.c(),u=O(),v&&v.c(),h=O();for(let y=0;y<C.length;y+=1)C[y].c();k=O();for(let y=0;y<g.length;y+=1)g[y].c();b(n,"class","list-group svelte-h7j9mf"),A(n,"local-mail-menu-navbar",e[5]),A(n,"list-group-flush",e[5]),A(n,"border-top",e[5])},m(y,d){F(y,n,d),_&&_.m(n,null),L(n,t),z(l,n,null),L(n,i),T&&T.m(n,null),L(n,s),w&&w.m(n,null),L(n,f),p&&p.m(n,null),L(n,u),v&&v.m(n,null),L(n,h);for(let B=0;B<C.length;B+=1)C[B]&&C[B].m(n,null);L(n,k);for(let B=0;B<g.length;B+=1)g[B]&&g[B].m(n,null);S=!0},p(y,[d]){var ke;y[8]||y[10]?_?(_.p(y,d),d&1280&&M(_,1)):(_=ln(y),_.c(),M(_,1),_.m(n,t)):_&&(Q(),N(_,1,1,()=>{_=null}),X());const B={};d&2&&(B.text=y[1].inbox),d&17412&&(B.count=y[10]?(ke=y[2].find(y[15]))==null?void 0:ke.unread:y[14]),d&1536&&(B.params={tray:"inbox",courseid:y[10],search:y[9]}),d&16&&(B.active=y[4].tray=="inbox"),d&64&&(B.onClick=y[6]),l.$set(B),d&4096&&(a=y[12]("starred")),a?T?(T.p(y,d),d&4096&&M(T,1)):(T=sn(y),T.c(),M(T,1),T.m(n,s)):T&&(Q(),N(T,1,1,()=>{T=null}),X()),d&4096&&(o=y[12]("sent")),o?w?(w.p(y,d),d&4096&&M(w,1)):(w=an(y),w.c(),M(w,1),w.m(n,f)):w&&(Q(),N(w,1,1,()=>{w=null}),X()),d&4096&&(r=y[12]("drafts")),r?p?(p.p(y,d),d&4096&&M(p,1)):(p=on(y),p.c(),M(p,1),p.m(n,u)):p&&(Q(),N(p,1,1,()=>{p=null}),X()),d&4096&&(c=y[12]("trash")),c?v?(v.p(y,d),d&4096&&M(v,1)):(v=rn(y),v.c(),M(v,1),v.m(n,h)):v&&(Q(),N(v,1,1,()=>{v=null}),X()),d&1624&&(R=oe(y[3]),Q(),C=Be(C,d,j,1,y,R,m,n,Ae,fn,k,tn),X()),d&3925&&(H=oe(y[2]),Q(),g=Be(g,d,J,1,y,H,P,n,Ae,cn,null,nn),X()),(!S||d&32)&&A(n,"local-mail-menu-navbar",y[5]),(!S||d&32)&&A(n,"list-group-flush",y[5]),(!S||d&32)&&A(n,"border-top",y[5])},i(y){if(!S){M(_),M(l.$$.fragment,y),M(T),M(w),M(p),M(v);for(let d=0;d<R.length;d+=1)M(C[d]);for(let d=0;d<H.length;d+=1)M(g[d]);S=!0}},o(y){N(_),N(l.$$.fragment,y),N(T),N(w),N(p),N(v);for(let d=0;d<C.length;d+=1)N(C[d]);for(let d=0;d<g.length;d+=1)N(g[d]);S=!1},d(y){y&&D(n),_&&_.d(),K(l),T&&T.d(),w&&w.d(),p&&p.d(),v&&v.d();for(let d=0;d<C.length;d+=1)C[d].d();for(let d=0;d<g.length;d+=1)g[d].d()}}}function ct(e,n,t){let l,i,a,s,o,f,r,{settings:u}=n,{strings:c}=n,{courses:h}=n,{labels:C}=n,{params:m}=n,{navbar:k=!1}=n,{onClick:g=void 0}=n,{onCourseChange:P}=n;const S=w=>w.id==f,_=w=>w.id==f,T=w=>w.id==f;return e.$$set=w=>{"settings"in w&&t(0,u=w.settings),"strings"in w&&t(1,c=w.strings),"courses"in w&&t(2,h=w.courses),"labels"in w&&t(3,C=w.labels),"params"in w&&t(4,m=w.params),"navbar"in w&&t(5,k=w.navbar),"onClick"in w&&t(6,g=w.onClick),"onCourseChange"in w&&t(7,P=w.onCourseChange)},e.$$.update=()=>{e.$$.dirty&4&&t(14,l=h.reduce((w,p)=>w+p.unread,0)),e.$$.dirty&4&&t(13,i=h.reduce((w,p)=>w+p.drafts,0)),e.$$.dirty&17&&t(12,a=w=>u.globaltrays.includes(w)||m.tray==w),e.$$.dirty&17&&t(11,s=w=>u.coursetrays=="all"||u.coursetrays=="unread"&&(w.unread||0)>0||m.tray=="course"&&m.courseid==w.id),e.$$.dirty&1&&t(8,o=["shortname","fullname"].includes(u.filterbycourse)),e.$$.dirty&272&&t(10,f=o?m.courseid:void 0),e.$$.dirty&16&&t(9,r=m.search?{content:m.search.content,sendername:m.search.sendername,recipientname:m.search.recipientname,maxtime:m.search.maxtime,unread:m.search.unread,withfilesonly:m.search.withfilesonly}:void 0)},[u,c,h,C,m,k,g,P,o,r,f,s,a,i,l,S,_,T]}class dt extends te{constructor(n){super(),ne(this,n,ct,ut,ee,{settings:0,strings:1,courses:2,labels:3,params:4,navbar:5,onClick:6,onCourseChange:7})}}function mt(e){let n,t,l,i,a;return{c(){n=E("button"),t=E("i"),b(t,"class","fa fa-cog"),b(t,"aria-hidden",!0),b(n,"type","button"),b(n,"class","btn btn-secondary text-truncate"),b(n,"title",l=e[0].preferences)},m(s,o){F(s,n,o),L(n,t),i||(a=V(n,"click",function(){q(e[1])&&e[1].apply(this,arguments)}),i=!0)},p(s,[o]){e=s,o&1&&l!==(l=e[0].preferences)&&b(n,"title",l)},i:U,o:U,d(s){s&&D(n),i=!1,a()}}}function ht(e,n,t){let{strings:l}=n,{onClick:i}=n;return e.$$set=a=>{"strings"in a&&t(0,l=a.strings),"onClick"in a&&t(1,i=a.onClick)},[l,i]}class gt extends te{constructor(n){super(),ne(this,n,ht,mt,ee,{strings:0,onClick:1})}}function _t(e){let n,t=me(e[8])+"",l;return{c(){n=E("div"),l=Y(t),b(n,"class","local-mail-navbar-count count-container svelte-1fx09ec")},m(i,a){F(i,n,a),L(n,l)},p(i,a){a&256&&t!==(t=me(i[8])+"")&&x(l,t)},d(i){i&&D(n)}}}function bt(e){let n;return{c(){n=E("div"),n.innerHTML='<i class="fa fa-fw fa-spinner fa-pulse text-primary svelte-1fx09ec"></i>',b(n,"class","local-mail-navbar-spinner position-absolute svelte-1fx09ec")},m(t,l){F(t,n,l)},p:U,d(t){t&&D(n)}}}function dn(e){let n,t,l,i,a,s,o,f;return l=new Qn({props:{strings:e[1],onClick:e[10]}}),a=new gt({props:{strings:e[1],onClick:e[13]}}),o=new dt({props:{settings:e[0],strings:e[1],courses:e[2],labels:e[3],params:e[4],navbar:!0,onClick:e[12],onCourseChange:e[6]}}),{c(){n=E("div"),t=E("div"),W(l.$$.fragment),i=O(),W(a.$$.fragment),s=O(),W(o.$$.fragment),b(t,"class","d-flex justify-content-between p-2"),b(n,"class","local-mail-navbar-popover popover-region-container svelte-1fx09ec")},m(r,u){F(r,n,u),L(n,t),z(l,t,null),L(t,i),z(a,t,null),L(n,s),z(o,n,null),f=!0},p(r,u){const c={};u&2&&(c.strings=r[1]),l.$set(c);const h={};u&2&&(h.strings=r[1]),a.$set(h);const C={};u&1&&(C.settings=r[0]),u&2&&(C.strings=r[1]),u&4&&(C.courses=r[2]),u&8&&(C.labels=r[3]),u&16&&(C.params=r[4]),u&64&&(C.onCourseChange=r[6]),o.$set(C)},i(r){f||(M(l.$$.fragment,r),M(a.$$.fragment,r),M(o.$$.fragment,r),f=!0)},o(r){N(l.$$.fragment,r),N(a.$$.fragment,r),N(o.$$.fragment,r),f=!1},d(r){r&&D(n),K(l),K(a),K(o)}}}function kt(e){let n,t,l,i,a,s,o,f,r,u,c;function h(g,P){if(g[5])return bt;if(g[8]>0)return _t}let C=h(e),m=C&&C(e),k=e[7]&&dn(e);return{c(){n=E("div"),t=E("a"),l=E("i"),a=O(),m&&m.c(),o=O(),k&&k.c(),b(l,"class","fa fa-fw fa-envelope-o icon m-0"),b(l,"aria-label",i=e[1].plugginname),b(t,"aria-expanded",e[7]),b(t,"class","nav-link btn h-100 position-relative d-flex align-items-center px-2 py-0 rounded-0"),b(t,"href",Pe({tray:"inbox"})),b(t,"title",s=e[1].pluginname),b(n,"class","local-mail local-mail-navbar pop-over-region h-100 svelte-1fx09ec"),A(n,"popover-region-toggle",e[7])},m(g,P){F(g,n,P),L(n,t),L(t,l),L(t,a),m&&m.m(t,null),L(n,o),k&&k.m(n,null),r=!0,u||(c=[V(t,"click",e[11]),ue(Pn.call(null,n,e[9])),ue(f=Gn.call(null,n,e[5]))],u=!0)},p(g,[P]){(!r||P&2&&i!==(i=g[1].plugginname))&&b(l,"aria-label",i),C===(C=h(g))&&m?m.p(g,P):(m&&m.d(1),m=C&&C(g),m&&(m.c(),m.m(t,null))),(!r||P&128)&&b(t,"aria-expanded",g[7]),(!r||P&2&&s!==(s=g[1].pluginname))&&b(t,"title",s),g[7]?k?(k.p(g,P),P&128&&M(k,1)):(k=dn(g),k.c(),M(k,1),k.m(n,null)):k&&(Q(),N(k,1,1,()=>{k=null}),X()),f&&q(f.update)&&P&32&&f.update.call(null,g[5]),(!r||P&128)&&A(n,"popover-region-toggle",g[7])},i(g){r||(M(k),r=!0)},o(g){N(k),r=!1},d(g){g&&D(n),m&&m.d(),k&&k.d(),u=!1,G(c)}}}function wt(e,n,t){let l,{settings:i}=n,{strings:a}=n,{courses:s}=n,{labels:o}=n,{params:f}=n,{loading:r}=n,{onClick:u}=n,{onComposeClick:c}=n,{onCourseChange:h}=n,C=!1;const m=()=>{t(7,C=!1)},k=()=>{m(),c(f.courseid)},g=_=>{_.preventDefault(),i.globaltrays.length>0||o.length>0?t(7,C=!C):u({tray:"inbox"})},P=_=>{m(),u(_)},S=()=>{m(),u({...f,dialog:"preferences"})};return e.$$set=_=>{"settings"in _&&t(0,i=_.settings),"strings"in _&&t(1,a=_.strings),"courses"in _&&t(2,s=_.courses),"labels"in _&&t(3,o=_.labels),"params"in _&&t(4,f=_.params),"loading"in _&&t(5,r=_.loading),"onClick"in _&&t(14,u=_.onClick),"onComposeClick"in _&&t(15,c=_.onComposeClick),"onCourseChange"in _&&t(6,h=_.onCourseChange)},e.$$.update=()=>{e.$$.dirty&4&&t(8,l=s.reduce((_,T)=>_+T.unread,0))},[i,a,s,o,f,r,h,C,l,m,k,g,P,S,u,c]}class Jt extends te{constructor(n){super(),ne(this,n,wt,kt,ee,{settings:0,strings:1,courses:2,labels:3,params:4,loading:5,onClick:14,onComposeClick:15,onCourseChange:6})}}const Le={};async function Qt(e){return Le[e]==null&&(Le[e]=await new Promise(n=>{window.require([e],n)})),Le[e]}export{St as $,bn as A,kn as B,_n as C,M as D,de as E,Ft as F,N as G,G as H,Nt as I,Bt as J,ce as K,Q as L,X as M,W as N,z as O,K as P,A as Q,Vt as R,te as S,Wt as T,oe as U,Ke as V,Tt as W,Be as X,Vn as Y,Lt as Z,me as _,Re as a,Ve as a0,Ae as a1,Dt as a2,Pe as a3,Ot as a4,Rt as a5,Qt as a6,Un as a7,Pt as a8,Kt as a9,pt as aa,jt as ab,At as ac,lt as ad,zn as ae,jn as af,Mt as ag,Et as ah,ot as ai,zt as aj,Yt as ak,Gn as al,Qn as am,gt as an,dt as ao,qt as ap,yt as aq,Ht as ar,Jt as as,Ut as at,ne as b,ve as c,Ie as d,ee as e,Me as f,F as g,D as h,De as i,E as j,b as k,Oe as l,_e as m,U as n,L as o,x as p,It as q,Gt as r,vt as s,Y as t,hn as u,O as v,V as w,q as x,ue as y,Pn as z};
//# sourceMappingURL=global-BngkQIBe.js.map
